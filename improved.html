
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
	<div class="row">
		<nav id="navbar-example2" class="navbar navbar-dark bg-dark col-md-12">
				<a class="navbar-brand" href="#">Ricatoni’s</a>
				<ul class="nav nav-pills">
					<li class="nav-item">
					<a class="nav-link" href="index.html">Old Version</a>
					</li>
					
				</ul>
			</nav>
	</div>
	<br/>				
	<div class="row">
		<div class="col-md-10 offset-md-2">
			<article id="post-10" class="post-10 page type-page status-publish has-post-thumbnail hentry">
				<header class="entry-header">
					<h1 class="title-post entry-title">Catering / Delivery</h1>
				</header><!-- .entry-header -->
        
                <form id="cateringForm">
				<div class="entry-content">
					<p>Our business? Great Italian food. Let Ricatoni’s cater your event and let our business take care of yours. Whether it is a special occasion or a special gathering, celebrate together with Ricatoni&#8217;s Italian food.</p>
					<p><strong>Catering</strong></p>
                    <p>These special prices apply only to groups of 10 or more people!</p>
                    <p>Pasta choices: Spaghetti, Ravioli, Lasagna</p>
                    <p><em>All orders include fresh bread and herb mix with olive oil.</em></p>
                    <br/>
					<div class="row">
                        <div class="control-label col-md-4">$7 per person: choice of pasta</div>
                        <input id="seven" class="form-control col-md-4"/>
                    </div>
                    <br/>
                    <div class="row">
                            <div class="control-label col-md-4">$9 per person: choice of pasta and salad</div>
                            <input id="nine" class="form-control col-md-4"/>
                    </div>
                    <br/>
                    <div class="row">
                            <div class="control-label col-md-4">$11 per person: choice of pasta, salad, and dessert</div>
                            <input id="eleven" class="form-control col-md-4"/>
                    </div>
                    <br/>
                    <p>Dessert choices: Tiramisu, Sogno di Cioccolata, Cannoli, or Cheesecake*</p>
                    <p>*All catering desserts are 1/2 portion; cheesecake is $3 extra.<br />
                    <br/>
                    <div class="row">
                            <div class="control-label col-md-4">Number of Cheesecakes?</div>
                            <input id="cheesecakes" class="form-control col-md-4"/>
                    </div>
                    <br/>
					*Prices do not include sales tax, and there is an additional 10% for carry-out orders.</p>
					<p><strong>Delivery</strong></p>
					<ul>
						<li>All delivery orders require a 24 hour notice and a $25 delivery fee.</li>
						<li>Orders will include utensils, plates, and plenty of bread.</li>
						<li>Gallons of tea are available for $4 each and include cups, ice, lemons, and sweeteners.</li>
                    </ul>
                    <br/>
                    <div class="row">
                            <div class="control-label col-md-4">Delivery?</div>
                            <br/>
                            <input type="radio" name="delivery" id="deliveryYes" value="Yes"/> Yes&nbsp;
                            <br/>
                            <input type="radio" name="delivery" id="deliveryNo" value="No"/> No
                    </div>
                    <br/>
                    <div class="row">
                            <div class="control-label col-md-4">Gallons of Tea?</div>
                            <input id="tea" class="form-control col-md-4"/>
                    </div>
                    <br/>
                    <br/>
                    <div id="total" class="control-label col-md-4">Total: </div>
                    <br/>
                    <div class="row">
                        <button id="submit" class="btn btn-primary">Place Order!</button>
                    </div>
                    <br/>
                    <div class="row">
                        <button id="cancel" class="btn btn-danger">Clear</button>
                    </div>
                </div><!-- .entry-content -->
            </form>
		
				
			</article><!-- #post-## -->
		</div>
    </div>
    <div class="row">
        <div class="col-md-10 offset-md-2">
                <h2>Previous Orders</h2>
                <hr/>
                <br/>
                <div class="col-md-12">
                    <ul id="prevOrders">
        
                    </ul>
        
                </div>
        </div>
    </div>			


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script>

    function getPreviousOrders()
    {
        var xhr = new XMLHttpRequest();                 // Create XMLHttpRequest object

        xhr.onload = function() {                       // When readystate changes
        // The following conditional check will not work locally - only on a server
        //if(xhr.status === 200) {                      // If server status was ok
            responseObject = JSON.parse(xhr.responseText);

            // BUILD UP STRING WITH NEW CONTENT (could also use DOM manipulation)
            var newContent = '';
            newContent += '<li>';
            newContent += '<div class="prevOrderItem"';
            newContent += '<dl>';
            newContent += '<dt>Number of $7 Per Person Meals</dt>';
            newContent += '<dd>'+responseObject.order.sevenPerPerson+'</dd>';
            newContent += '<dt>Number of $9 Per Person Meals</dt>';
            newContent += '<dd>'+responseObject.order.ninePerPerson+'</dd>';
            newContent += '<dt>Number of $11 Per Person Meals</dt>';
            newContent += '<dd>'+responseObject.order.elevenPerPerson+'</dd>';
            newContent += '<dt>Number of Dessert Upgrades</dt>';
            newContent += '<dd>'+responseObject.order.upgradedDessert+'</dd>';
            newContent += '<dt>Gallons of Tea</dt>';
            newContent += '<dd>'+responseObject.order.gallonsOfTea+'</dd>';
            newContent += '<dt>Delivery?</dt>';
            if(responseObject.order.carryOut)
            {
                newContent += '<dd>No</dd>';
            }
            else{
                newContent += '<dd>Yes</dd>';
            }
            
            newContent += '</dl>';
            newContent += '<div class="row">';
            newContent +=  JSON.stringify(responseObject);
            newContent += '</div>';
            newContent += '</div>';
            newContent += '</li>';


            // Update the page with the new content
            $('#prevOrders').html(newContent);

        //}
        };

        xhr.open('GET', 'orders.json', true);        // Prepare the request
        xhr.send(null);       

    }

    function resetForm()
    {
        $('#cateringForm').trigger("reset");
    }

    function calculateTotal() {

        // gather the data from the forms
        var seven =  parseInt($('#seven').val());
        var nine  =  parseInt($('#nine').val());
        var eleven = parseInt($('#eleven').val());
        var numberCheesecakes = parseInt($('#cheesecakes').val());
        var tea = parseInt($('#tea').val());
        var isDelivery = false;

        if($('#deliveryYes').is(':checked'))
        {
            isDelivery = true;
        }

        var total = 0;
        if(seven > 0 && seven != NaN)
        {
            //calculate value from $7 meals
            total = seven * 7;
        }

        if(nine > 0 && nine != NaN)
        {
            //add value from $9 dollar meals
            total += (nine * 9);
        }

        if(eleven > 0 && eleven != NaN)
        {
            //add value from $11 dollar meals
            total += (eleven * 11);
        }

        //only add upgraded desserts for $11 dollar meals
        if(eleven > 0 && numberCheesecakes != NaN && numberCheesecakes > 0)
        {
            // cannot have more cheesecakes than desserts
            for( i = 0; i < numberCheesecakes && i < eleven; i++)
            total += 3;
        }

        if(tea > 0 && tea != NaN)
        {
        //add value from Gallons of tea
        total += (tea * 4);
        }

        //add Deliver Fee if isDelivery is True
        if(isDelivery)
        {
            total += 25;
        }

        return total;


    }

    $(document).ready(function () {

        getPreviousOrders();

        $('#seven, #nine, #eleven, #cheesecakes, #tea').keyup(function(e){
            var total = calculateTotal();
            $("#total").html('Total: $'+total);
        });

        $('#deliveryYes, #deliveryNo').change(function () {

            var total = calculateTotal();
            $("#total").html('Total: $'+total);
        });

        $('#submit').click(function () {

            if(confirm("Are you sure?"))
            {
                alert('Order for $' + calculateTotal()+' has been placed. Thank You.');
                resetForm();
            }


        });

        $('#cancel').click(function(){


            resetForm();

        });

    });

</script>
</body>
</html>
